services:
  knowyoursos-configurationserver:
    build:
        context: ./KnowYourSOS-ConfigurationServer
        dockerfile: ../Dockerfile
        args:
          SERVICE_NAME: ConfigurationServer
    container_name: knowyoursos-configurationserver
    networks:
      - backend
  knowyoursos-eurekaserver:
    build:
      context: ./KnowYourSOS-EurekaServer
      dockerfile: ../Dockerfile
      args:
        SERVICE_NAME: EurekaServer
    container_name: knowyoursos-eurekaserver
    depends_on:
      - knowyoursos-configurationserver
    networks:
      - backend
  knowyoursos-apigateway:
    build:
      context: ./KnowYourSOS-ApiGateway
      dockerfile: ../Dockerfile
      args:
        SERVICE_NAME: UpdateDBMicroservice
    container_name: knowyoursos-apigateway
    ports:
          - "8222:8222"
    depends_on:
      - knowyoursos-eurekaserver
    networks:
      - backend
  knowyoursos-sosnumbermicroservice:
    build:
      context: ./KnowYourSOS-SOSNumberMicroservice
      dockerfile: ../Dockerfile
      args:
        SERVICE_NAME: UpdateDBMicroservice
    container_name: knowyoursos-sosnumbermicroservice
    depends_on:
      - knowyoursos-eurekaserver
    networks:
      - backend
  knowyoursos-updatedbmicroservice:
    build:
      context: ./KnowYourSOS-UpdateDBMicroservice
      dockerfile: ../Dockerfile
      args:
        SERVICE_NAME: UpdateDBMicroservice
    container_name: knowyoursos-updatedbmicroservice
    depends_on:
      - knowyoursos-eurekaserver
    networks:
      - backend
networks:
  backend:
    driver: bridge
